{% extends "base.html" %}

{% block title %}Investment Guide - NextProperty AI{% endblock %}

{% block meta_description %}Comprehensive real estate investment guide powered by AI. Learn how to build a successful property portfolio with expert insights and data-driven strategies.{% endblock %}

{% block content %}
<div class="container mt-5 pt-4">
    <!-- Hero Section -->
    <section class="guide-hero mb-5">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="display-4 fw-bold text-primary mb-4">Real Estate Investment Guide</h1>
                <p class="lead mb-4">
                    Master the art of property investment with our comprehensive, AI-powered guide. 
                    From first-time buyers to seasoned investors, learn proven strategies to build 
                    wealth through Canadian real estate.
                </p>
                <div class="guide-stats d-flex gap-4 mb-4">
                    <div class="stat-item">
                        <h4 class="fw-bold text-warning">10+</h4>
                        <p class="text-muted">Chapters</p>
                    </div>
                    <div class="stat-item">
                        <h4 class="fw-bold text-warning">50+</h4>
                        <p class="text-muted">AI Insights</p>
                    </div>
                    <div class="stat-item">
                        <h4 class="fw-bold text-warning">100+</h4>
                        <p class="text-muted">Expert Tips</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="guide-visual text-center">
                    <i class="fas fa-book-open fa-8x text-primary mb-3"></i>
                    <h4 class="text-muted">Your Investment Roadmap</h4>
                </div>
            </div>
        </div>
    </section>

    <!-- Table of Contents -->
    <section class="toc-section mb-5">
        <div class="row">
            <div class="col-lg-4">
                <div class="toc-card sticky-top">
                    <h3 class="fw-bold mb-4">Guide Contents</h3>
                    <nav class="guide-nav">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link" href="#getting-started">1. Getting Started</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#market-analysis">2. Market Analysis</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#property-types">3. Property Types</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#financing">4. Financing Options</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#ai-tools">5. Using AI Tools</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#due-diligence">6. Due Diligence</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#portfolio-building">7. Portfolio Building</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#risk-management">8. Risk Management</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#tax-strategies">9. Tax Strategies</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#advanced-strategies">10. Advanced Strategies</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-lg-8">
                <!-- Chapter 1: Getting Started -->
                <section class="guide-chapter" id="getting-started">
                    <div class="chapter-header">
                        <h2 class="fw-bold text-primary">Chapter 1: Getting Started</h2>
                        <p class="lead">Build your foundation for successful real estate investing</p>
                    </div>
                    
                    <div class="chapter-content">
                        <h4 class="fw-bold mb-3">Define Your Investment Goals</h4>
                        <p>Before diving into real estate investment, clearly define your objectives:</p>
                        <ul class="guide-list">
                            <li><strong>Cash Flow:</strong> Generate monthly rental income</li>
                            <li><strong>Appreciation:</strong> Build long-term wealth through property value growth</li>
                            <li><strong>Tax Benefits:</strong> Leverage depreciation and other deductions</li>
                            <li><strong>Portfolio Diversification:</strong> Reduce overall investment risk</li>
                        </ul>

                        <div class="ai-insight">
                            <h5 class="fw-bold">
                                <i class="fas fa-brain text-warning me-2"></i>AI Insight
                            </h5>
                            <p>
                                Our AI analysis shows that investors who clearly define their goals 
                                are 73% more likely to achieve positive returns within the first 3 years.
                            </p>
                        </div>

                        <h4 class="fw-bold mb-3 mt-4">Assess Your Financial Readiness</h4>
                        <div class="checklist">
                            <div class="checklist-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Emergency fund (3-6 months expenses)</span>
                            </div>
                            <div class="checklist-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Down payment funds (typically 20-25%)</span>
                            </div>
                            <div class="checklist-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Good credit score (680+ preferred)</span>
                            </div>
                            <div class="checklist-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Stable income and employment</span>
                            </div>
                            <div class="checklist-item">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Additional funds for closing costs and reserves</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Chapter 2: Market Analysis -->
                <section class="guide-chapter" id="market-analysis">
                    <div class="chapter-header">
                        <h2 class="fw-bold text-primary">Chapter 2: Market Analysis</h2>
                        <p class="lead">Understanding real estate markets with AI-powered insights</p>
                    </div>
                    
                    <div class="chapter-content">
                        <h4 class="fw-bold mb-3">Key Market Indicators</h4>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="indicator-card">
                                    <h6 class="fw-bold">Population Growth</h6>
                                    <p>Growing populations drive housing demand</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="indicator-card">
                                    <h6 class="fw-bold">Employment Rates</h6>
                                    <p>Job growth supports property values</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="indicator-card">
                                    <h6 class="fw-bold">Infrastructure Development</h6>
                                    <p>Transit and amenities boost property appeal</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="indicator-card">
                                    <h6 class="fw-bold">Supply vs Demand</h6>
                                    <p>Limited inventory increases competition</p>
                                </div>
                            </div>
                        </div>

                        <div class="ai-insight mt-4">
                            <h5 class="fw-bold">
                                <i class="fas fa-brain text-warning me-2"></i>AI Market Prediction
                            </h5>
                            <p>
                                Our AI models analyze 500+ market factors in real-time to predict 
                                property value trends with 95% accuracy over 12-month periods.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Chapter 3: Property Types -->
                <section class="guide-chapter" id="property-types">
                    <div class="chapter-header">
                        <h2 class="fw-bold text-primary">Chapter 3: Property Types</h2>
                        <p class="lead">Choose the right property type for your investment strategy</p>
                    </div>
                    
                    <div class="chapter-content">
                        <div class="property-types">
                            <div class="property-type-card">
                                <h5 class="fw-bold text-success">Single-Family Homes</h5>
                                <div class="pros-cons">
                                    <div class="pros">
                                        <h6 class="fw-bold text-success">Pros:</h6>
                                        <ul>
                                            <li>Easier to finance and manage</li>
                                            <li>Strong appreciation potential</li>
                                            <li>Broad tenant appeal</li>
                                        </ul>
                                    </div>
                                    <div class="cons">
                                        <h6 class="fw-bold text-danger">Cons:</h6>
                                        <ul>
                                            <li>Higher entry cost</li>
                                            <li>Single tenant dependency</li>
                                            <li>Vacancy impact</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="property-type-card">
                                <h5 class="fw-bold text-info">Condominiums</h5>
                                <div class="pros-cons">
                                    <div class="pros">
                                        <h6 class="fw-bold text-success">Pros:</h6>
                                        <ul>
                                            <li>Lower entry cost</li>
                                            <li>Amenities included</li>
                                            <li>Less maintenance responsibility</li>
                                        </ul>
                                    </div>
                                    <div class="cons">
                                        <h6 class="fw-bold text-danger">Cons:</h6>
                                        <ul>
                                            <li>Condo fees</li>
                                            <li>Special assessments</li>
                                            <li>Board restrictions</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="property-type-card">
                                <h5 class="fw-bold text-warning">Multi-Unit Properties</h5>
                                <div class="pros-cons">
                                    <div class="pros">
                                        <h6 class="fw-bold text-success">Pros:</h6>
                                        <ul>
                                            <li>Multiple income streams</li>
                                            <li>Better cash flow potential</li>
                                            <li>Risk diversification</li>
                                        </ul>
                                    </div>
                                    <div class="cons">
                                        <h6 class="fw-bold text-danger">Cons:</h6>
                                        <ul>
                                            <li>Higher management complexity</li>
                                            <li>Larger down payment required</li>
                                            <li>More maintenance issues</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Chapter 4: Financing -->
                <section class="guide-chapter" id="financing">
                    <div class="chapter-header">
                        <h2 class="fw-bold text-primary">Chapter 4: Financing Options</h2>
                        <p class="lead">Navigate Canadian real estate financing with confidence</p>
                    </div>
                    
                    <div class="chapter-content">
                        <h4 class="fw-bold mb-3">Mortgage Types</h4>
                        <div class="financing-options">
                            <div class="financing-card">
                                <h6 class="fw-bold">Conventional Mortgage</h6>
                                <p>Down payment of 20% or more, no CMHC insurance required</p>
                            </div>
                            <div class="financing-card">
                                <h6 class="fw-bold">High-Ratio Mortgage</h6>
                                <p>Down payment less than 20%, requires mortgage insurance</p>
                            </div>
                            <div class="financing-card">
                                <h6 class="fw-bold">Investment Property Mortgage</h6>
                                <p>Typically requires 20-25% down, higher interest rates</p>
                            </div>
                        </div>

                        <div class="calculator-tool mt-4">
                            <h5 class="fw-bold">
                                <i class="fas fa-calculator text-primary me-2"></i>Quick Financing Calculator
                            </h5>
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <label class="form-label">Property Price</label>
                                    <input type="number" class="form-control" id="propertyPrice" placeholder="500000">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Down Payment %</label>
                                    <input type="number" class="form-control" id="downPayment" placeholder="20">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Interest Rate %</label>
                                    <input type="number" class="form-control" id="interestRate" placeholder="5.5" step="0.1">
                                </div>
                                <div class="col-12">
                                    <button class="btn btn-primary" onclick="calculatePayment()">
                                        Calculate Monthly Payment
                                    </button>
                                    <div id="paymentResult" class="mt-3"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Chapter 5: AI Tools -->
                <section class="guide-chapter" id="ai-tools">
                    <div class="chapter-header">
                        <h2 class="fw-bold text-primary">Chapter 5: Using AI Tools</h2>
                        <p class="lead">Leverage artificial intelligence for smarter investment decisions</p>
                    </div>
                    
                    <div class="chapter-content">
                        <h4 class="fw-bold mb-3">NextProperty AI Tools</h4>
                        <div class="ai-tools-grid">
                            <div class="tool-card">
                                <div class="tool-icon">
                                    <i class="fas fa-calculator"></i>
                                </div>
                                <h6 class="fw-bold">AI Price Prediction</h6>
                                <p>Get accurate property valuations using machine learning</p>
                                <a href="{{ url_for('main.predict_price') }}" class="btn btn-sm btn-outline-primary">Try Now</a>
                            </div>
                            <div class="tool-card">
                                <div class="tool-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <h6 class="fw-bold">Investment Opportunities</h6>
                                <p>Discover undervalued properties with high ROI potential</p>
                                <a href="{{ url_for('main.top_properties') }}" class="btn btn-sm btn-outline-primary">Explore</a>
                            </div>
                            <div class="tool-card">
                                <div class="tool-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h6 class="fw-bold">Market Analysis</h6>
                                <p>Real-time market trends and economic indicators</p>
                                <a href="{{ url_for('main.market_insights') }}" class="btn btn-sm btn-outline-primary">View</a>
                            </div>
                        </div>

                        <div class="ai-workflow mt-4">
                            <h5 class="fw-bold">AI-Powered Investment Workflow</h5>
                            <div class="workflow-steps">
                                <div class="workflow-step">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h6 class="fw-bold">Market Scan</h6>
                                        <p>AI analyzes thousands of properties daily</p>
                                    </div>
                                </div>
                                <div class="workflow-step">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h6 class="fw-bold">Value Assessment</h6>
                                        <p>Machine learning models predict fair market value</p>
                                    </div>
                                </div>
                                <div class="workflow-step">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h6 class="fw-bold">Opportunity Ranking</h6>
                                        <p>Properties ranked by investment potential</p>
                                    </div>
                                </div>
                                <div class="workflow-step">
                                    <div class="step-number">4</div>
                                    <div class="step-content">
                                        <h6 class="fw-bold">Risk Analysis</h6>
                                        <p>Comprehensive risk assessment and scoring</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Continue with remaining chapters... -->
                <section class="guide-chapter" id="due-diligence">
                    <div class="chapter-header">
                        <h2 class="fw-bold text-primary">Chapter 6: Due Diligence</h2>
                        <p class="lead">Essential steps before making an investment</p>
                    </div>
                    
                    <div class="chapter-content">
                        <div class="due-diligence-checklist">
                            <h4 class="fw-bold mb-3">Investment Property Checklist</h4>
                            <div class="checklist-category">
                                <h6 class="fw-bold text-success">Financial Analysis</h6>
                                <div class="checklist-item">
                                    <i class="fas fa-square text-muted me-2"></i>
                                    <span>Calculate cap rate and cash-on-cash return</span>
                                </div>
                                <div class="checklist-item">
                                    <i class="fas fa-square text-muted me-2"></i>
                                    <span>Analyze rental income potential</span>
                                </div>
                                <div class="checklist-item">
                                    <i class="fas fa-square text-muted me-2"></i>
                                    <span>Review operating expenses and taxes</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- More chapters would continue here... -->
                <div class="chapter-navigation mt-5">
                    <div class="alert alert-info">
                        <h5 class="fw-bold">
                            <i class="fas fa-info-circle me-2"></i>Complete Guide Available
                        </h5>
                        <p class="mb-0">
                            This is a preview of our comprehensive Investment Guide. 
                            The complete guide includes detailed chapters on portfolio building, 
                            risk management, tax strategies, and advanced investment techniques.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="guide-cta bg-primary text-white p-5 rounded mt-5">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h3 class="fw-bold mb-3">Ready to Start Your Investment Journey?</h3>
                <p class="lead mb-0">
                    Put these strategies into action with our AI-powered platform. 
                    Start exploring investment opportunities today.
                </p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="{{ url_for('main.properties') }}" class="btn btn-warning btn-lg me-3">
                    <i class="fas fa-search me-2"></i>Find Properties
                </a>
                <a href="{{ url_for('main.predict_price') }}" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-calculator me-2"></i>AI Analysis
                </a>
            </div>
        </div>
    </section>
</div>

<style>
.guide-hero .stat-item {
    text-align: center;
}

.toc-card {
    background: white;
    border-radius: 15px;
    padding: 2rem;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    position: sticky;
    top: 100px;
}

.guide-nav .nav-link {
    color: #666;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
    transition: all 0.3s ease;
}

.guide-nav .nav-link:hover,
.guide-nav .nav-link.active {
    background: #f8f9fa;
    color: #007bff;
    text-decoration: none;
}

.guide-chapter {
    margin-bottom: 4rem;
    scroll-margin-top: 100px;
}

.chapter-header {
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 1rem;
    margin-bottom: 2rem;
}

.guide-list {
    padding-left: 1.5rem;
}

.guide-list li {
    margin-bottom: 0.75rem;
}

.ai-insight {
    background: linear-gradient(135deg, #fff3cd, #ffeaa7);
    border-left: 4px solid #ffc107;
    padding: 1.5rem;
    border-radius: 10px;
    margin: 2rem 0;
}

.checklist-item {
    display: flex;
    align-items: center;
    padding: 0.5rem 0;
}

.indicator-card {
    background: white;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    height: 100%;
}

.property-type-card {
    background: white;
    border-radius: 15px;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.pros-cons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-top: 1rem;
}

.pros ul,
.cons ul {
    padding-left: 1.5rem;
    margin-bottom: 0;
}

.financing-card {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    border-left: 4px solid #007bff;
}

.calculator-tool {
    background: white;
    border-radius: 15px;
    padding: 2rem;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.ai-tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 1rem;
}

.tool-card {
    background: white;
    border-radius: 10px;
    padding: 1.5rem;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.tool-card:hover {
    transform: translateY(-5px);
}

.tool-icon {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #007bff, #0056b3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
}

.tool-icon i {
    color: white;
    font-size: 1.5rem;
}

.workflow-steps {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.workflow-step {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
}

.step-number {
    width: 40px;
    height: 40px;
    background: #007bff;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    flex-shrink: 0;
}

.due-diligence-checklist {
    background: white;
    border-radius: 15px;
    padding: 2rem;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.checklist-category {
    margin-bottom: 2rem;
}

@media (max-width: 768px) {
    .toc-card {
        position: static;
        margin-bottom: 2rem;
    }
    
    .pros-cons {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .ai-tools-grid,
    .workflow-steps {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
// Smooth scrolling for navigation
document.querySelectorAll('.guide-nav .nav-link').forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
            targetElement.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Highlight current section
window.addEventListener('scroll', function() {
    const sections = document.querySelectorAll('.guide-chapter');
    const navLinks = document.querySelectorAll('.guide-nav .nav-link');
    
    let currentSection = '';
    sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        if (rect.top <= 120 && rect.bottom >= 120) {
            currentSection = section.id;
        }
    });
    
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + currentSection) {
            link.classList.add('active');
        }
    });
});

// Financing calculator
function calculatePayment() {
    const price = parseFloat(document.getElementById('propertyPrice').value);
    const downPercent = parseFloat(document.getElementById('downPayment').value);
    const rate = parseFloat(document.getElementById('interestRate').value);
    
    if (!price || !downPercent || !rate) {
        document.getElementById('paymentResult').innerHTML = 
            '<div class="alert alert-warning">Please fill in all fields</div>';
        return;
    }
    
    const downPayment = price * (downPercent / 100);
    const loanAmount = price - downPayment;
    const monthlyRate = rate / 100 / 12;
    const numPayments = 25 * 12; // 25 year amortization
    
    const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numPayments)) / 
                          (Math.pow(1 + monthlyRate, numPayments) - 1);
    
    document.getElementById('paymentResult').innerHTML = `
        <div class="alert alert-success">
            <h6 class="fw-bold">Calculation Results:</h6>
            <p class="mb-1"><strong>Down Payment:</strong> $${downPayment.toLocaleString()}</p>
            <p class="mb-1"><strong>Loan Amount:</strong> $${loanAmount.toLocaleString()}</p>
            <p class="mb-0"><strong>Monthly Payment:</strong> $${monthlyPayment.toLocaleString()}</p>
        </div>
    `;
}

// Interactive checklist
document.querySelectorAll('.checklist-item .fas').forEach(checkbox => {
    checkbox.addEventListener('click', function() {
        if (this.classList.contains('fa-square')) {
            this.classList.remove('fa-square', 'text-muted');
            this.classList.add('fa-check-square', 'text-success');
        } else {
            this.classList.remove('fa-check-square', 'text-success');
            this.classList.add('fa-square', 'text-muted');
        }
    });
});
</script>
{% endblock %}
